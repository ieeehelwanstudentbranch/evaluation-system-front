language: node_js

node_js:
  - 10.15.3

cache: npm


# env:
#   - SERVER_IP_ADDRESS=108.179.251.68

# before_install:
#   - openssl aes-256-cbc -K $encrypted_295e88c6ff4e_key -iv $encrypted_295e88c6ff4e_iv
#     -in deploy_key.enc -out ./deploy_key -d
#   - eval "$(ssh-agent -s)"
#   - chmod 600 ./deploy_key
#   - echo -e "Host $SERVER_IP_ADDRESS\n\tStrictHostKeyChecking no\n" >> ~/.ssh/config
#   - ssh-add ./deploy_key
#   - ssh -i ./deploy_key ieeehsb@108.179.251.68 pwd

install:
  - npm ci

script:
  # - npm test
  - npm run build

deploy:
  provider: pages
  skip-cleanup: true
  github-token: $GITHUB_TOKEN
  on: 
    branch: gh-pages

notifications:
  email:
    recipients:
      - mohamednajiub@ieeehsb.org
    on_success: always
    on_failure: always
